<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skapece - 3D Animator Portfolio</title>
    
    <!-- Meta tags, Favicon, Font e Icone -->
    <meta property="og:title" content="Skapece - 3D Animator Portfolio">
    <meta property="og:description" content="Portfolio di Skapece, 3D Animator. Scopri i miei lavori, dai background alle animazioni.">
    <meta property="og:image" content="https://github.com/cristianomiolla/Portfolio-Skapi/blob/main/images/extra/metatags.png?raw=true">
    <meta property="og:url" content="https://www.skapece.it/">
    <meta property="og:type" content="website">
    <link rel="icon" href="images/extra/favicon.png" type="image/png">
    <link rel="shortcut icon" href="images/extra/favicon.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Stili globali -->
    <style>
        :root {
            --font-principale: 'Inter', sans-serif;
            --colore-testo-primario: #212529;
            --colore-testo-secondario: #6c757d;
            --colore-sfondo: #f8f9fa;
            --colore-sidebar: #ffffff;
            --colore-accento: #007bff;
            --larghezza-sidebar: 280px;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: var(--font-principale); 
            background-color: var(--colore-sfondo); 
            color: var(--colore-testo-primario); 
            line-height: 1.6;
            transition: padding-right 0.3s ease;
        }
        body.no-scroll {
            overflow: hidden;
        }
        h1, h2, h3 { font-weight: 700; color: var(--colore-testo-primario); }
        h1 { font-size: 2rem; }
        h2 { font-size: 1.2rem; font-weight: 400; color: var(--colore-testo-secondario); }
        h3 { font-size: 1.5rem; margin-bottom: 1rem; }
        p { margin-bottom: 1rem; color: var(--colore-testo-secondario); }
        a { text-decoration: none; color: var(--colore-testo-primario); transition: color 0.2s ease-in-out; }
        a:hover { color: var(--colore-accento); }
    </style>

    <style>
        /* Stili Generali per TUTTI i Modali */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex; justify-content: center; align-items: center;
            z-index: 1000; opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            padding: 20px;
        }
        .modal-overlay.is-visible { opacity: 1; visibility: visible; }
        
        .modal-content {
            background-color: var(--colore-sidebar); border-radius: 10px;
            max-width: 900px; width: 100%; max-height: 90vh;
            position: relative; transform: scale(0.95); transition: transform 0.3s ease;
        }
        .modal-overlay.is-visible .modal-content { transform: scale(1); }

        .modal-close-button {
            position: absolute; top: -15px; right: -15px;
            background-color: white; border: none; border-radius: 50%;
            width: 40px; height: 40px; font-size: 28px; line-height: 40px; text-align: center;
            cursor: pointer; color: var(--colore-testo-primario);
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* Stili SPECIFICI per il Modale a Step (#image-modal) */
        #image-modal .modal-content {
            padding: 30px 35px;
            display: flex; flex-direction: column;
        }
        #modal-project-title {
            margin-bottom: 20px; padding-bottom: 15px;
            border-bottom: 1px solid #e9ecef;
            font-size: 1.8rem; flex-shrink: 0;
        }
        .modal-body-scrollable {
            overflow-y: auto; flex-grow: 1;
            padding-right: 15px;
        }
        .modal-step {
            display: flex; gap: 20px;
            align-items: flex-start; margin-bottom: 30px;
        }
        .modal-step:last-child { margin-bottom: 0; }
        .modal-step img {
            flex: 0 0 50%; max-width: 50%;
            border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .modal-step p {
            flex: 1; margin-bottom: 0; font-size: 0.95rem;
            color: var(--colore-testo-secondario);
        }
        @media (max-width: 768px) {
            .modal-step { flex-direction: column; }
            .modal-step img { flex-basis: auto; width: 100%; max-width: 100%; }
            #modal-project-title { font-size: 1.5rem; }
        }

        /* Stili SPECIFICI per il Modale Video (#video-modal) - RIPRISTINATI E RESI SPECIFICI */
        #video-modal .modal-content {
            padding: 25px;
        }
        #video-modal .modal-body {
            display: flex;
            gap: 25px;
            max-height: calc(90vh - 50px); /* 90vh - padding verticale */
        }
        #video-modal .modal-video-wrapper {
            flex: 2; max-width: 65%;
            background-color: #000; border-radius: 5px;
            display: flex; align-items: center; justify-content: center;
        }
        #video-modal #modal-video {
            width: 100%; max-height: 100%; object-fit: contain;
        }
        #video-modal .modal-description-container {
            flex: 1;
            overflow-y: auto;
        }
        #video-modal #modal-video-description {
            font-size: 0.95rem;
            line-height: 1.7;
            color: var(--colore-testo-secondario);
        }
        @media (max-width: 768px) {
            #video-modal .modal-body { flex-direction: column; }
            #video-modal .modal-video-wrapper { max-width: 100%; max-height: 50vh; }
        }
    </style>
</head>

<body>

    <div class="main-container">

        <!-- Sezione Sidebar -->
        <section id="sidebar-component">
            <header class="sidebar">
                <div class="author-info">
                    <h1>Skapece</h1>
                    <h2>3d animator</h2>
                </div>
                <button class="hamburger-menu" aria-label="Apri o chiudi menu">
                    <i class="fas fa-bars icon-hamburger"></i>
                    <i class="fas fa-xmark icon-close"></i>
                </button>
                <div class="mobile-menu-content">
                    <nav class="main-nav">
                        <ul>
                            <li><a href="#home" class="active">home</a></li>
                            <li><a href="#backgrounds">backgrounds</a></li>
                            <li><a href="#animations">animations</a></li>
                        </ul>
                    </nav>
                    <div class="social-links">
                        <a href="#" target="_blank" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" target="_blank" title="Behance"><i class="fab fa-behance"></i></a>
                        <a href="#" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>

                <style>
                    .main-container { display: flex; }
                    @media (max-width: 768px) { .main-container { flex-direction: column; } }
                </style>
            </header>

            <style>
                .sidebar {
                    width: var(--larghezza-sidebar); height: 100vh; position: fixed; top: 0; left: 0;
                    background-color: var(--colore-sidebar); border-right: 1px solid #e9ecef;
                    padding: 40px; display: flex; flex-direction: column;
                    z-index: 10;
                }
                .author-info { margin-bottom: 50px; }
                .author-info h1 { margin-bottom: 5px; }
                .mobile-menu-content { flex-grow: 1; display: flex; flex-direction: column; }
                .main-nav ul { list-style-type: none; }
                .main-nav li { margin-bottom: 20px; }
                /* [MODIFICA] Rimuove il margine dall'ultimo elemento della lista per un allineamento pulito */
                .main-nav li:last-child { margin-bottom: 0; }
                .main-nav a { font-size: 1.1rem; font-weight: 500; text-transform: lowercase; cursor: pointer; }
                .main-nav a.active { color: var(--colore-accento); font-weight: 700; }
                .social-links { margin-top: auto; }
                .social-links a { font-size: 1.5rem; margin-right: 20px; color: var(--colore-testo-secondario); transition: color 0.2s ease; }
                .social-links a:last-child { margin-right: 0; }
                .social-links a:hover { color: var(--colore-accento); }
                .hamburger-menu {
                    display: none; background: none; border: none; font-size: 1.8rem; cursor: pointer; color: var(--colore-testo-primario);
                    position: relative; width: 30px; height: 30px;
                }
                .hamburger-menu i { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); transition: opacity 0.3s ease, transform 0.3s ease; }
                .hamburger-menu .icon-close { opacity: 0; transform: translate(-50%, -50%) rotate(-90deg); }
                .hamburger-menu.is-active .icon-hamburger { opacity: 0; transform: translate(-50%, -50%) rotate(90deg); }
                .hamburger-menu.is-active .icon-close { opacity: 1; transform: translate(-50%, -50%) rotate(0deg); }
                
                @media (max-width: 768px) {
                    .sidebar {
                        position: relative;
                        width: 100%; height: auto; border-right: none; border-bottom: 1px solid #e9ecef;
                        padding: 15px 20px;
                        flex-direction: row; 
                        justify-content: center; 
                        align-items: center;
                    }
                    .author-info { 
                        margin-bottom: 0;
                        text-align: center;
                    }
                    .author-info h1 { font-size: 1.6rem; }
                    .author-info h2 { font-size: 1rem; }
                    
                    .hamburger-menu { 
                        display: block;
                        position: absolute;
                        top: 50%;
                        right: 20px;
                        transform: translateY(-50%);
                    }

                    .mobile-menu-content { 
                        position: absolute;
                        top: 100%;
                        left: 0;
                        width: 100%;
                        background: var(--colore-sidebar);
                        padding: 20px 0;
                        box-shadow: 0 5px 10px rgba(0,0,0,0.05);
                        text-align: center; 
                        opacity: 0;
                        visibility: hidden;
                        transform: translateY(-10px);
                        transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
                        border-top: 1px solid #e9ecef;
                    }
                    .mobile-menu-content.is-open {
                        opacity: 1;
                        visibility: visible;
                        transform: translateY(0);
                    }
                    .mobile-menu-content .main-nav { margin-bottom: 0px; }
                    .mobile-menu-content .social-links {
                        display: none;
                    }
                }
            </style>
        </section>


        <!-- Sezione Contenuti -->
        <section id="content-component">
            <style>
                .content-area {
                    margin-left: var(--larghezza-sidebar); width: calc(100% - var(--larghezza-sidebar)); padding: 60px;
                }
                .content-section { display: none; animation: fadeIn 0.5s ease-in-out; }
                .content-section.active { display: block; }
                @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
                @media (max-width: 768px) {
                    .content-area { margin-left: 0; width: 100%; padding: 40px 20px; }
                }
            </style>
            
            <main class="content-area">

                <!-- Componente Sezione Home -->
                <section id="home" class="content-section active">
                    <div class="home-image-container">
                        <img src="images/home/uomoprova.avif" alt="Foto dell'autore">
                    </div>
                    <div class="home-bio">
                        <h3>Benvenuto nel mio mondo digitale.</h3>
                        <p>Sono Skapece, un animatore 3D con una passione per la creazione di mondi e personaggi che prendono vita. Attraverso il mio lavoro, cerco di raccontare storie coinvolgenti e di evocare emozioni.</p>
                        <p>In questo portfolio troverai una selezione dei miei lavori, dai modelli di environment (backgrounds) alle animazioni complete. Naviga tra le sezioni per scoprire di più.</p>
                        
                        <div class="cta-container">
                            <a href="mailto:skapece@email.com" class="cta-button">
                                <span class="cta-icon">✉</span>
                                Contattami per un progetto
                            </a>
                        </div>
                        
                        <div class="social-links home-social-links">
                            <a href="#" target="_blank" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                            <a href="#" target="_blank" title="ArtStation"><i class="fab fa-artstation"></i></a>
                            <a href="#" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                    
                    <style>
                        #home.active { 
                            display: flex; 
                            align-items: center; 
                            gap: 40px; 
                        }
                        .home-image-container { 
                            flex-basis: 40%; 
                            max-width: 350px; 
                        }
                        .home-image-container img { 
                            width: 100%; 
                            height: auto; 
                            border-radius: 10px; 
                            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
                        }
                        .home-bio { 
                            flex-basis: 60%; 
                        }
                        .cta-container {
                            margin-top: 30px;
                        }
                        .cta-button {
                            display: inline-flex;
                            align-items: center;
                            gap: 10px;
                            padding: 15px 30px;
                            background-color: var(--colore-accento);
                            color: white;
                            text-decoration: none;
                            border-radius: 8px;
                            font-weight: 600;
                            font-size: 16px;
                            font-family: var(--font-principale);
                            transition: all 0.3s ease;
                            box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
                        }
                        .cta-button:hover {
                            background-color: #0056b3;
                            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
                            color: white;
                        }
                        .cta-icon {
                            font-size: 18px;
                        }

                        .home-social-links {
                            display: none;
                            margin-top: 40px;
                        }
                        .home-social-links a {
                            font-size: 1.8rem;
                            margin: 0 15px;
                        }
                        
                        @media (max-width: 768px) { 
                            #home.active { 
                                flex-direction: column; 
                                text-align: center; 
                            }
                            .cta-button {
                                padding: 12px 25px;
                                font-size: 15px;
                            }
                            .home-social-links {
                                display: block;
                            }
                        }
                    </style>
                </section>

                <!-- Sezione Backgrounds (modificata con step di processo) -->
                <section id="backgrounds" class="content-section">
                    <div class="backgrounds-grid">
                        
                        <!-- Esempio completo per un progetto -->
                        <img 
                            src="images/backgrounds/placeholder.png" 
                            alt="Foresta Incantata" 
                            data-steps='[
                                {
                                    "imageSrc": "images/backgrounds/placeholder.png",
                                    "description": "<strong>Step 1: Blockout.</strong> Ho iniziato definendo le forme principali e la composizione generale della scena in Blender per stabilire la scala e il feeling iniziale."
                                },
                                {
                                    "imageSrc": "images/backgrounds/placeholder.png",
                                    "description": "<strong>Step 2: Modellazione Dettagliata.</strong> Successivamente, ho modellato gli asset principali come alberi, rocce e vegetazione, concentrandomi sui dettagli che avrebbero catturato la luce."
                                },
                                {
                                    "imageSrc": "images/backgrounds/placeholder.png",
                                    "description": "<strong>Step 3: Texturing.</strong> Utilizzando Substance Painter, ho creato materiali realistici per le superfici, aggiungendo muschio e usura per dare un senso di vissuto all environment."
                                },
                                {
                                    "imageSrc": "images/backgrounds/placeholder.png",
                                    "description": "<strong>Step 4: Illuminazione e Rendering.</strong> La fase finale ha riguardato l illuminazione volumetrica per creare i raggi di luce magici e il rendering finale con Cycles, seguito da una leggera post-produzione."
                                }
                            ]'>
                        
                        <!-- Struttura da compilare per gli altri progetti -->
                        <img 
                            src="images/backgrounds/placeholder.png" 
                            alt="Città Cyberpunk" 
                            data-steps='[
                                {"imageSrc": "images/backgrounds/placeholder.png", "description": "Step 1: Descrizione del primo step per Città Cyberpunk."},
                                {"imageSrc": "images/backgrounds/placeholder.png", "description": "Step 2: Descrizione del secondo step."}
                            ]'>
                        <img 
                            src="images/backgrounds/placeholder.png" 
                            alt="Deserto Alieno" 
                            data-steps='[
                                {"imageSrc": "images/backgrounds/placeholder.png", "description": "Step 1: Descrizione del primo step per Deserto Alieno."}
                            ]'>
                        <img 
                            src="images/backgrounds/placeholder.png" 
                            alt="Interno Accogliente" 
                            data-steps='[
                                {"imageSrc": "images/backgrounds/placeholder.png", "description": "Step 1: Descrizione del primo step per Interno Accogliente."}
                            ]'>
                        <img 
                            src="images/backgrounds/placeholder.png" 
                            alt="Rovine Sottomarine" 
                            data-steps='[
                                {"imageSrc": "images/backgrounds/placeholder.png", "description": "Step 1: Descrizione del primo step per Rovine Sottomarine."}
                            ]'>
                        <img 
                            src="images/backgrounds/placeholder.png" 
                            alt="Stazione Spaziale" 
                            data-steps='[
                                {"imageSrc": "images/backgrounds/placeholder.png", "description": "Step 1: Descrizione del primo step per Stazione Spaziale."}
                            ]'>
                    </div>

                    <style>
                        .backgrounds-grid {
                            display: grid; 
                            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
                            gap: 20px;
                        }
                        .backgrounds-grid img {
                            width: 100%; 
                            height: auto; 
                            object-fit: cover; 
                            border-radius: 8px;
                            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
                            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
                            cursor: pointer;
                        }
                        .backgrounds-grid img:hover {
                            transform: scale(1.03); 
                            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
                        }
                        @media (max-width: 992px) {
                            .backgrounds-grid { 
                                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
                            }
                        }
                        @media (max-width: 768px) {
                            .backgrounds-grid img:hover {
                                transform: none; 
                                box-shadow: 0 4px 10px rgba(0,0,0,0.08); 
                            }
                        }
                    </style>
                </section>
                
                <!-- Sezione Animations (modificata con anteprime) -->
                <section id="animations" class="content-section">
                    <div class="animations-grid">
                        
                        <div class="video-container">
                            <img src="images/backgrounds/placeholder.png" alt="Anteprima animazione walk cycle" class="video-thumbnail">
                            <video loop muted playsinline preload="metadata" src="images/animations/billytheseed.mp4" data-description="Animazione di un personaggio che cammina. L'obiettivo era creare un 'walk cycle' fluido e naturale, concentrandomi sul peso e l'equilibrio. Realizzato in Blender e renderizzato con Cycles."></video>
                        </div>

                        <div class="video-container">
                            <img src="images/backgrounds/placeholder.png" alt="Anteprima animazione esplosione stilizzata" class="video-thumbnail">
                            <video loop muted playsinline preload="metadata" src="images/animations/ilcantodelmarinaio.mov" data-description="Esplosione stilizzata creata con effetti particellari e shading 'toon'. Questa tecnica permette di ottenere un look da cartone animato, ideale per progetti non fotorealistici."></video>
                        </div>

                        <div class="video-container">
                            <img src="images/backgrounds/placeholder.png" alt="Anteprima animazione facciale" class="video-thumbnail">
                            <video loop muted playsinline preload="metadata" src="images/animations/metro.mov" data-description="Animazione facciale per esprimere sorpresa. Ho utilizzato un rig con 'shape keys' per un controllo preciso delle espressioni, sincronizzando il tutto con una traccia audio di riferimento."></video>
                        </div>

                        <div class="video-container">
                            <img src="images/backgrounds/placeholder.png" alt="Anteprima simulazione tessuto" class="video-thumbnail">
                            <video loop muted playsinline preload="metadata" src="images/animations/routine.mov" data-description="Simulazione di un tessuto che cade su un oggetto. La fisica è stata gestita dal motore interno di Blender, regolando parametri come massa, rigidità e frizione per un risultato credibile."></video>
                        </div>

                    </div>

                    <style>
                        .animations-grid {
                            display: grid; 
                            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
                            gap: 20px;
                        }

                        .video-container {
                            /* Usiamo CSS Grid per sovrapporre gli elementi in modo pulito */
                            display: grid;
                            place-items: center; /* Centra il contenuto se ha dimensioni diverse */
                            
                            border-radius: 8px; 
                            overflow: hidden;
                            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
                            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
                            cursor: pointer;
                        }

                        @media (hover: hover) {
                            .video-container:hover {
                                transform: scale(1.03); 
                                box-shadow: 0 8px 20px rgba(0,0,0,0.12);
                            }
                        }

                        /* Stile per sovrapporre immagine e video nella stessa cella della griglia */
                        .video-thumbnail,
                        .video-container video {
                            /* Assegna entrambi gli elementi alla stessa area della griglia (riga 1, colonna 1) */
                            grid-area: 1 / 1;
                            
                            width: 100%; 
                            height: 100%; 
                            object-fit: cover; 
                            transition: opacity 0.3s ease-in-out;
                        }

                        /* Di default, il video è invisibile ma occupa il suo spazio, definendo la dimensione */
                        .video-container video {
                            opacity: 0;
                        }

                        /* Al passaggio del mouse, il video diventa visibile e l'anteprima scompare */
                        .video-container:hover video {
                            opacity: 1;
                        }
                        .video-container:hover .video-thumbnail {
                            opacity: 0;
                        }

                        @media (max-width: 992px) {
                            .animations-grid { 
                                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
                            }
                        }
                    </style>
                </section>
            </main>
        </section>
    </div>

    <!-- Modal Immagini (Struttura modificata per gli step) -->
    <div id="image-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="modal-close" class="modal-close-button" aria-label="Chiudi popup">×</button>
            <h3 id="modal-project-title"></h3>
            <div class="modal-body-scrollable">
                <div id="modal-steps-container">
                    <!-- JavaScript popolerà questa area con gli step -->
                </div>
            </div>
        </div>
    </div>
    <div id="video-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="video-modal-close" class="modal-close-button" aria-label="Chiudi popup">×</button>
            <div class="modal-body">
                <div class="modal-video-wrapper">
                    <video id="modal-video" src="" loop muted controls playsinline></video>
                </div>
                <div class="modal-description-container">
                    <p id="modal-video-description"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Script unificato -->
    <script> 
        document.addEventListener('DOMContentLoaded', () => {
            // Funzioni per gestire lo scroll della pagina quando un modale è aperto
            function getScrollbarWidth() {
                return window.innerWidth - document.documentElement.clientWidth;
            }
            function disableBodyScroll() {
                const scrollbarWidth = getScrollbarWidth();
                document.body.style.paddingRight = `${scrollbarWidth}px`;
                document.body.classList.add('no-scroll');
            }
            function enableBodyScroll() {
                document.body.classList.remove('no-scroll');
                document.body.style.paddingRight = '';
            }

            // Gestione del menu hamburger per mobile
            const hamburgerButton = document.querySelector('.hamburger-menu');
            const mobileMenu = document.querySelector('.mobile-menu-content');
            if (hamburgerButton && mobileMenu) {
                hamburgerButton.addEventListener('click', () => {
                    hamburgerButton.classList.toggle('is-active');
                    mobileMenu.classList.toggle('is-open');
                });
                const menuLinks = mobileMenu.querySelectorAll('a');
                menuLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        if (mobileMenu.classList.contains('is-open')) {
                            hamburgerButton.classList.remove('is-active');
                            mobileMenu.classList.remove('is-open');
                        }
                    });
                });
            }

            // Gestione dell'autoplay dei video al passaggio del mouse
            const videoContainers = document.querySelectorAll('.video-container');
            videoContainers.forEach(container => {
                const video = container.querySelector('video');
                if (video) {
                    container.addEventListener('mouseenter', () => video.play().catch(e => {}));
                    container.addEventListener('mouseleave', () => {
                        video.pause();
                        video.currentTime = 0;
                    });
                }
            });

            // *** INIZIO BLOCCO MODIFICATO: Gestione del modale a step per i Backgrounds ***
            const imageModal = document.getElementById('image-modal');
            if (imageModal) {
                const modalTitle = document.getElementById('modal-project-title');
                const stepsContainer = document.getElementById('modal-steps-container');
                const closeImageModalButton = document.getElementById('modal-close');
                const gridImages = document.querySelectorAll('.backgrounds-grid img');
                
                function openImageModal(imageElement) {
                    // Imposta il titolo del progetto dall'attributo 'alt' della thumbnail
                    modalTitle.textContent = imageElement.alt;
                    
                    // Pulisci il contenuto precedente
                    stepsContainer.innerHTML = '';

                    // Prova a leggere e parsare i dati JSON dagli step
                    try {
                        const stepsData = JSON.parse(imageElement.dataset.steps);
                        
                        // Crea e aggiungi l'HTML per ogni step
                        stepsData.forEach(step => {
                            const stepElement = document.createElement('div');
                            stepElement.className = 'modal-step';
                            stepElement.innerHTML = `
                                <img src="${step.imageSrc}" alt="Step del processo di creazione">
                                <p>${step.description}</p>
                            `;
                            stepsContainer.appendChild(stepElement);
                        });

                    } catch (e) {
                        // Se c'è un errore (es. JSON non valido), mostra un messaggio di fallback
                        stepsContainer.innerHTML = '<p>Non è stato possibile caricare i dettagli del progetto. Riprova più tardi.</p>';
                        console.error("Errore nel parsing del JSON da data-steps:", e);
                    }

                    imageModal.classList.add('is-visible');
                    disableBodyScroll();
                }

                function closeImageModal() {
                    imageModal.classList.remove('is-visible');
                    enableBodyScroll();
                    // Pulisci il contenuto al momento della chiusura per alleggerire il DOM
                    setTimeout(() => {
                        modalTitle.textContent = '';
                        stepsContainer.innerHTML = '';
                    }, 300); // Ritardo pari alla durata della transizione CSS
                }

                gridImages.forEach(img => img.addEventListener('click', () => openImageModal(img)));
                closeImageModalButton.addEventListener('click', closeImageModal);
                imageModal.addEventListener('click', e => { if (e.target === imageModal) closeImageModal(); });
                document.addEventListener('keydown', e => { if (e.key === 'Escape' && imageModal.classList.contains('is-visible')) closeImageModal(); });
            }
            // *** FINE BLOCCO MODIFICATO ***

            // Gestione del modale per i video (rimane invariato)
            const videoModal = document.getElementById('video-modal');
            if (videoModal) {
                const modalVideo = document.getElementById('modal-video');
                const modalVideoDescription = document.getElementById('modal-video-description');
                const closeVideoModalButton = document.getElementById('video-modal-close');
                
                function openVideoModal(videoContainer) {
                    const videoElement = videoContainer.querySelector('video');
                    if (!videoElement) return;
                    
                    modalVideo.src = videoElement.src;
                    modalVideoDescription.textContent = videoElement.dataset.description;
                    videoModal.classList.add('is-visible');
                    modalVideo.play().catch(e => {});
                    disableBodyScroll();
                }
                
                function closeVideoModal() {
                    videoModal.classList.remove('is-visible');
                    modalVideo.pause(); 
                    modalVideo.currentTime = 0;
                    enableBodyScroll();
                }
                videoContainers.forEach(container => {
                    container.addEventListener('click', () => openVideoModal(container));
                });
                
                closeVideoModalButton.addEventListener('click', closeVideoModal);
                videoModal.addEventListener('click', e => { if (e.target === videoModal) closeVideoModal(); });
                document.addEventListener('keydown', e => { if (e.key === 'Escape' && videoModal.classList.contains('is-visible')) closeVideoModal(); });
            }
            
            // Gestione della navigazione tra le sezioni
            const navLinks = document.querySelectorAll('.main-nav a');
            const contentSections = document.querySelectorAll('.content-section');
            function switchSection(event) {
                event.preventDefault();
                const targetId = this.getAttribute('href');
                navLinks.forEach(link => link.classList.remove('active'));
                this.classList.add('active');
                contentSections.forEach(section => section.classList.remove('active'));
                const targetSection = document.querySelector(targetId);
                if (targetSection) targetSection.classList.add('active');
            }
            navLinks.forEach(link => link.addEventListener('click', switchSection));
        });
    </script>

</body>
</html> 